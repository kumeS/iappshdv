# iappshdv プロジェクト概要

## プロジェクトの目的
このプロジェクトは、iOS/macOSアプリケーション開発における品質検証とデバッグを自動化するためのシェルスクリプト集です。主にSwift/SwiftUIプロジェクトのコード品質チェック、パフォーマンス検証、セキュリティチェックなどを行うためのツールが含まれています。

## 主なスクリプト構成

### 1. 環境準備スクリプト
- `sh/install_prereqs.sh`: 開発に必要なツール（Xcode Command Line Tools、Homebrew、Xcode.app、その他の開発ツール）の導入・更新
- `sh/prepare_mac_env.sh`: Mac環境に必要なパッケージ（XcodeGen、swift-format、SwiftLint）の準備

### 2. 検証スクリプト
- `sh/verify_debug_v1.sh`: コード品質検証スクリプト（バージョン1）
- `sh/verify_debug_v2.sh`: コード品質検証スクリプト（バージョン2、最新版）
- `sh/verify_debug_wbuild_v1.sh`: ビルドチェック機能を含むコード品質検証スクリプト

## 主な検証機能

### コード品質チェック
- 重複コード検出（jscpd）
- コード整形（swiftformat）
- 静的解析（swiftlint）
- ファイル行数統計
- サイクロマティック複雑度チェック
- 未使用コード解析（periphery）
- TODOコメント検出

### セキュリティチェック
- 依存パッケージ脆弱性検査（osv-scanner）
- ライセンス互換性チェック（licenseplist）
- 依存ライブラリ更新状況確認（CocoaPods/SwiftPM）

### パフォーマンスチェック
- IPAサイズチェック
- シンボルUUID重複確認（dwarf情報の検証）

### ビルド検証
- xcodebuildによるビルドエラー検出と一覧表示

## 使用方法
各スクリプトはコマンドライン引数を受け取り、指定されたプロジェクトディレクトリに対して検証を実行します。
例えば、`verify_debug_v2.sh <project_folder> [<ipa_path>] [<baseline_mb>] [-s|--silent] [-y|--yes] [-u|--update-deps]`

- `<project_folder>`: 検証対象のプロジェクトディレクトリ
- `<ipa_path>`: IPAファイルのパス（オプション）
- `<baseline_mb>`: IPAサイズのベースライン（MB単位、オプション）
- `-s|--silent`: サイレントモード（詳細出力を抑制）
- `-y|--yes`: 自動でYes応答（対話的な問い合わせを自動承認）
- `-u|--update-deps`: 依存ツールを自動更新

## 技術的特徴
- Bashスクリプトで実装され、macOS環境での使用を前提としています
- Homebrewを活用して必要なツールを自動インストール・更新
- テンポラリディレクトリを使用してログファイルを管理
- 各種チェックのエラーと警告を収集し、最終的にサマリーとして表示
- 条件に応じた柔軟なエラーレベル設定（警告/エラー）
- 依存ツールのバージョン管理と推奨バージョンへの更新支援

このプロジェクトはiOSアプリケーション開発における継続的インテグレーション（CI）パイプラインの一部として使用することで、コード品質の維持と問題の早期発見に貢献します。 